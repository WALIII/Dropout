function [FS_ROI_Data] = FS_regression_preprocessing()


% Check to see if directory exists:
fn = 'extraction'
 if exist(fn, 'dir')
   warning('folder exist...')
else
  mkdir(fn)



% \\ load TEMPLATE, roi_ave1... roi_ave2...
load('template_data.mat'); % load template data

S = dir(fullfile(D,'*.mat')); % load roi data
%
for k = 1:numel(S)
    N = S(k).name;
    disp(N)
    R = regexp(N,'roi_ave','match','once');
end

for i = 1: length(R) % run through all roi sets
load(R(i))

[calcium, DATA_D, song_r, song, align, Motif_ind, BGD, stretch] =  FS_PreMotor(roi_ave,TEMPLATE);

% save data
end


cd(fn);

% Check to see if directory exists:
fn2 = 'processed'
 if exist(fn2, 'dir')
   warning('foldera exist...')
else
  mkdir(fn)

clear S;
S = dir(fullfile(D,'*.mat')); % load roi data


for i = 1:length(S)
  load(S(i))
[data(:,:,i)] = FS_Data(calcium,align,Motif_ind,0,35);

%to do ( get the song data out!)
data.Motif_ind(:,i) = Motif_ind;
song_align = 30*48000;
data.song_r(:,:,i) = 0;
data.song(:,:,i) = 0;


end



% concat calcium and song data ( and keep motif data )

%% Data Cleaning


FS_ROI_Data = data;

% check song data

% check
